"use strict";(self.webpackChunkgolden_forest_website=self.webpackChunkgolden_forest_website||[]).push([["2566"],{4659:function(e,a,l){l.r(a),l.d(a,{frontMatter:()=>f,toc:()=>x,default:()=>y,metadata:()=>s,assets:()=>g,contentTitle:()=>u});var s=JSON.parse('{"id":"Games/DnD/XmlTest","title":"XmlChar Test Page","description":"This page tests the XmlChar component with different display modes and character files.","source":"@site/docs/Games/DnD/XmlTest.mdx","sourceDirName":"Games/DnD","slug":"/Games/DnD/XmlTest","permalink":"/pr-preview/pr-70/docs/Games/DnD/XmlTest","draft":false,"unlisted":false,"editUrl":"https://github.com/sdelrio/golden-forest/edit/master/docs/Games/DnD/XmlTest.mdx","tags":[],"version":"current","frontMatter":{},"sidebar":"tutorialSidebar","previous":{"title":"Lingering Injuries","permalink":"/pr-preview/pr-70/docs/Games/DnD/Injuries"},"next":{"title":"Master Armor Table","permalink":"/pr-preview/pr-70/docs/Games/DnD/armor_table"}}'),i=l(74848),t=l(84429),n=l(96540),r=l(97158),c=l(10307);let m={container:"container_yYsR",header:"header_D77w",portraitContainer:"portraitContainer_lh1N",clearfix:"clearfix_znAG",name:"name_b49W",classLevel:"classLevel_HgJH",portrait:"portrait_THiu",emptyFace:"emptyFace_GP8d",vitals:"vitals_N1rZ",vitalItem:"vitalItem_3McE",abilities:"abilities_pDY_",ability:"ability_D_fQ",abilityLabel:"abilityLabel_GOBM",abilityValue:"abilityValue_IUiV",abilityBonus:"abilityBonus_wW5h",infoSection:"infoSection_JWMj",infoLabel:"infoLabel_PWbD",infoList:"infoList_Tyev",small:"small_CU7d",medium:"medium_Ad9h",placeholderIcon:"placeholderIcon_N8sa"};function d(e){return"number"!=typeof e?e:e>=0?`+${e}`:`${e}`}var o=l(39836);function h(e){return(0,i.jsx)(c.A,{fallback:(0,i.jsx)("div",{children:"Loading character..."}),children:()=>(0,i.jsx)(p,{...e})})}function p({filename:e,display:a="medium",image:l}){let[s,t]=(0,n.useState)(null),[c,h]=(0,n.useState)(null),p=(0,r.Ay)("/fg/chars"),f=(0,r.Ay)("/fg/avatar"),u="small"===a,g="large"===a;(0,n.useEffect)(()=>{if(!e)return;let a="";e.endsWith(".xml")||(a=".xml"),fetch(`${p}/${e}${a}`).then(a=>{if(!a.ok)throw Error(`Could not fetch ${e}`);return a.text()}).then(a=>{let l=(e=>{let a=new DOMParser().parseFromString(e,"text/xml").getElementsByTagName("character")[0];if(!a)return null;let l=(e,a)=>{let l=Array.from(e.children).find(e=>e.nodeName===a);return l?l.textContent:""},s=(e,a)=>{let l=e.getElementsByTagName(a)[0];return l?l.textContent:""},i=(e,a)=>{let l=s(e,a);return l?parseInt(l,10):0},t={name:l(a,"name"),race:l(a,"race"),classes:[],abilities:{},ac:0,hp:0,speed:0,skills:[],languages:[],feats:[]},n=a.getElementsByTagName("classes")[0];n&&Array.from(n.children).forEach(e=>{t.classes.push({name:s(e,"name"),level:i(e,"level")})});let r=a.getElementsByTagName("abilities")[0];r&&["strength","dexterity","constitution","intelligence","wisdom","charisma"].forEach(e=>{let a=r.getElementsByTagName(e)[0];a&&(t.abilities[e]={score:i(a,"score"),bonus:i(a,"bonus")})});let c=a.getElementsByTagName("defenses")[0];if(c){let e=c.getElementsByTagName("ac")[0];e&&(t.ac=i(e,"total"))}let m=a.getElementsByTagName("hp")[0];m&&(t.hp=i(m,"total"));let d=a.getElementsByTagName("speed")[0];d&&(t.speed=i(d,"total"));let o=a.getElementsByTagName("skilllist")[0];o&&Array.from(o.children).forEach(e=>{i(e,"prof")>0&&t.skills.push({name:s(e,"name"),total:i(e,"total")})});let h=a.getElementsByTagName("languagelist")[0];h&&Array.from(h.children).forEach(e=>{t.languages.push(s(e,"name"))});let p=a.getElementsByTagName("featlist")[0];return p&&Array.from(p.children).forEach(e=>{t.feats.push(s(e,"name"))}),t})(a);if(!l)throw Error(`Could not parse ${e}`);t(l)}).catch(e=>{console.error(e),h(e.message)})},[e]);let[x,j]=(0,n.useState)(l);if((0,n.useEffect)(()=>{if(!l&&g){let a=e.replace(".xml",""),l=`${f}/${a}.jpg`;fetch(l,{method:"HEAD"}).then(a=>{if(!a.ok)throw Error(`Could not fetch ${e}`);return a.text()}).catch(e=>{console.error(e),h(e.message)}).then(e=>{e.ok?j(l):j(`${f}/faceless.svg`)}).catch(()=>j(`${f}/faceless.svg`))}},[e,l,f,g]),c)return(0,i.jsxs)("div",{className:m.error,children:["Error: ",c]});if(!s)return(0,i.jsxs)("div",{className:m.loading,children:["Loading ",e,"..."]});let{name:y,race:v,classes:N,abilities:b,ac:_,hp:D,speed:T,skills:E,languages:w,feats:C}=s;return(0,i.jsxs)("div",{className:(0,o.A)(m.container,m[a]),children:[(()=>{if(!g)return null;if(l){let e=`${f}/${l}`;return(0,i.jsx)("div",{className:m.portraitContainer,children:(0,i.jsx)("img",{src:e,alt:y,className:m.portrait})})}return x?(0,i.jsx)("div",{className:m.portraitContainer,children:(0,i.jsx)("img",{src:x,alt:y,className:m.emptyFace})}):null})(),(0,i.jsxs)("div",{className:m.content,children:[(0,i.jsx)("h2",{className:m.name,children:y}),(0,i.jsxs)("p",{className:m.classLevel,children:[v&&(0,i.jsxs)("span",{children:[v," "]}),N.map(e=>`${e.name} ${e.level}`).join(" / ")]}),(0,i.jsxs)("ul",{className:m.vitals,children:[(0,i.jsxs)("li",{className:m.vitalItem,children:["AC: ",(0,i.jsx)("span",{children:_})]}),(0,i.jsxs)("li",{className:m.vitalItem,children:["HP: ",(0,i.jsx)("span",{children:D})]}),(0,i.jsxs)("li",{className:m.vitalItem,children:["Speed: ",(0,i.jsxs)("span",{children:[T," ft."]})]})]}),!u&&(0,i.jsx)("div",{className:m.abilities,children:Object.entries(b).map(([e,a])=>(0,i.jsxs)("div",{className:m.ability,children:[(0,i.jsx)("div",{className:m.abilityLabel,children:e.slice(0,3).toUpperCase()}),(0,i.jsx)("div",{className:m.abilityValue,children:a.score}),(0,i.jsxs)("div",{className:m.abilityBonus,children:["(",d(a.bonus),")"]})]},e))}),!u&&(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)("div",{className:m.infoSection,children:[(0,i.jsx)("span",{className:m.infoLabel,children:"Proficient Skills:"}),(0,i.jsx)("ul",{className:m.infoList,children:E.length>0?E.map(e=>(0,i.jsxs)("li",{children:[e.name," ",d(e.total)]},e.name)):(0,i.jsx)("li",{children:"None"})})]}),(0,i.jsxs)("div",{className:m.infoSection,children:[(0,i.jsx)("span",{className:m.infoLabel,children:"Languages:"}),(0,i.jsx)("ul",{className:m.infoList,children:w.length>0?w.map(e=>(0,i.jsx)("li",{children:e},e)):(0,i.jsx)("li",{children:"Common"})})]})]}),g&&C.length>0&&(0,i.jsxs)("div",{className:m.infoSection,children:[(0,i.jsx)("span",{className:m.infoLabel,children:"Feats:"}),(0,i.jsx)("ul",{className:m.infoList,children:C.map(e=>(0,i.jsx)("li",{children:e},e))})]})]}),(0,i.jsx)("div",{className:m.clearfix})]})}let f={},u="XmlChar Test Page",g={},x=[{value:"Display: Small",id:"display-small",level:2},{value:"Display: Medium (Default)",id:"display-medium-default",level:2},{value:"Display: Large",id:"display-large",level:2},{value:"Display: Large with Image",id:"display-large-with-image",level:2},{value:"Different Character",id:"different-character",level:2}];function j(e){let a={code:"code",h1:"h1",h2:"h2",header:"header",p:"p",...(0,t.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(a.header,{children:(0,i.jsx)(a.h1,{id:"xmlchar-test-page",children:"XmlChar Test Page"})}),"\n",(0,i.jsxs)(a.p,{children:["This page tests the ",(0,i.jsx)(a.code,{children:"XmlChar"})," component with different display modes and character files."]}),"\n","\n",(0,i.jsx)(a.h2,{id:"display-small",children:"Display: Small"}),"\n",(0,i.jsx)(a.p,{children:"Shows basic vitality and level."}),"\n",(0,i.jsx)(h,{filename:"tanadirian_6.xml",display:"small"}),"\n",(0,i.jsx)(a.h2,{id:"display-medium-default",children:"Display: Medium (Default)"}),"\n",(0,i.jsx)(a.p,{children:"Adds stats, skills, and languages."}),"\n",(0,i.jsx)(h,{filename:"tanadirian_6.xml",display:"medium"}),"\n",(0,i.jsx)(a.h2,{id:"display-large",children:"Display: Large"}),"\n",(0,i.jsx)(a.p,{children:"Adds feats and character portrait placeholder (empty face)."}),"\n",(0,i.jsx)(h,{filename:"tanadirian_6.xml",mage:"tanadirian.jpg",display:"large"}),"\n",(0,i.jsx)(a.h2,{id:"display-large-with-image",children:"Display: Large with Image"}),"\n",(0,i.jsx)(a.p,{children:"Shows a provided character picture."}),"\n",(0,i.jsx)(h,{filename:"milo_4n.xml",display:"large",image:"milo.jpg"}),"\n",(0,i.jsx)(h,{filename:"alioth.xml",display:"large",image:"alioth.jpg"}),"\n",(0,i.jsx)(h,{filename:"antonidas_5.xml",display:"large",image:"antonidas.png"}),"\n",(0,i.jsx)(a.h2,{id:"different-character",children:"Different Character"}),"\n",(0,i.jsxs)(a.p,{children:["Testing with ",(0,i.jsx)(a.code,{children:"malagolvir_5.xml"})," medium."]}),"\n",(0,i.jsx)(h,{filename:"malagolvir_5.xml",display:"medium"}),"\n",(0,i.jsxs)(a.p,{children:["Testing with ",(0,i.jsx)(a.code,{children:"malagolvir_5"})," small."]}),"\n",(0,i.jsx)(h,{filename:"malagolvir_5",display:"small"})]})}function y(e={}){let{wrapper:a}={...(0,t.R)(),...e.components};return a?(0,i.jsx)(a,{...e,children:(0,i.jsx)(j,{...e})}):j(e)}},10307:function(e,a,l){l.d(a,{A:()=>t});var s=l(74848);l(96540);var i=l(98864);function t({children:e,fallback:a}){return(0,i.A)()?(0,s.jsx)(s.Fragment,{children:e?.()}):a??null}},84429:function(e,a,l){l.d(a,{R:()=>n,x:()=>r});var s=l(96540);let i={},t=s.createContext(i);function n(e){let a=s.useContext(t);return s.useMemo(function(){return"function"==typeof e?e(a):{...a,...e}},[a,e])}function r(e){let a;return a=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:n(e.components),s.createElement(t.Provider,{value:a},e.children)}}}]);