"use strict";(self.webpackChunkgolden_forest_website=self.webpackChunkgolden_forest_website||[]).push([["2566"],{53771:function(e,a,l){l.r(a),l.d(a,{frontMatter:()=>f,toc:()=>v,default:()=>b,metadata:()=>i,assets:()=>g,contentTitle:()=>j});var i=JSON.parse('{"id":"Games/DnD/XmlTest","title":"XmlTest","description":"","source":"@site/docs/Games/DnD/XmlTest.mdx","sourceDirName":"Games/DnD","slug":"/Games/DnD/XmlTest","permalink":"/pr-preview/pr-70/docs/Games/DnD/XmlTest","draft":false,"unlisted":false,"editUrl":"https://github.com/sdelrio/golden-forest/edit/master/docs/Games/DnD/XmlTest.mdx","tags":[],"version":"current","frontMatter":{"hide_title":true},"sidebar":"tutorialSidebar","previous":{"title":"Lingering Injuries","permalink":"/pr-preview/pr-70/docs/Games/DnD/Injuries"},"next":{"title":"Master Armor Table","permalink":"/pr-preview/pr-70/docs/Games/DnD/armor_table"}}'),s=l(74848),n=l(84429),t=l(96540),r=l(97158),c=l(10307);let d={container:"container_yYsR",fadeIn:"fadeIn_wEEg",containerMedium:"containerMedium_ufGN",containerSmall:"containerSmall_VfzI",header:"header_D77w",portraitContainer:"portraitContainer_lh1N",clearfix:"clearfix_znAG",name:"name_b49W",classLevel:"classLevel_HgJH",small:"small_CU7d",portrait:"portrait_THiu",emptyFace:"emptyFace_GP8d",vitals:"vitals_N1rZ",vitalItem:"vitalItem_3McE",abilities:"abilities_pDY_",ability:"ability_D_fQ",abilityLabel:"abilityLabel_GOBM",abilityValue:"abilityValue_IUiV",abilityBonus:"abilityBonus_wW5h",abilitiesCompact:"abilitiesCompact_abJt",abilitiesCompactHeader:"abilitiesCompactHeader_NxN8",abilityCompactLabel:"abilityCompactLabel_JFXk",abilityCompactValue:"abilityCompactValue_epMt",abilityCompactBonus:"abilityCompactBonus_eFK8",abilityCompactSave:"abilityCompactSave_bT10",infoSection:"infoSection_JWMj",infoLabel:"infoLabel_PWbD",infoList:"infoList_Tyev",medium:"medium_Ad9h",placeholderIcon:"placeholderIcon_N8sa",horizontalRule:"horizontalRule_qnjT"};function m(e){return"number"!=typeof e?e:e>=0?`+${e}`:`${e}`}var o=l(39836);function h(e){return(0,s.jsx)(c.A,{fallback:(0,s.jsx)("div",{className:(0,o.A)(d.container,d.containerSmall),children:(0,s.jsx)("div",{className:d.content,children:(0,s.jsx)("h1",{className:d.name,children:"Loading character..."})})}),children:()=>(0,s.jsx)(p,{...e})})}function p({filename:e,display:a="medium",image:l}){let[i,n]=(0,t.useState)(null),[c,h]=(0,t.useState)(null),p=(0,r.Ay)("/fg/chars"),x=(0,r.Ay)("/fg/avatar"),u="small"===a,f="medium"===a,j="large"===a;(0,t.useEffect)(()=>{if(!e)return;let a="";e.endsWith(".xml")||(a=".xml"),fetch(`${p}/${e}${a}`).then(a=>{if(!a.ok)throw Error(`File not found: ${e}`);let l=a.headers.get("content-type")||"";if(!l.includes("xml")&&!l.includes("text/plain"))throw Error(`File not found: ${e}`);return a.text()}).then(a=>{let l=(e=>{let a=new DOMParser().parseFromString(e,"text/xml").getElementsByTagName("character")[0];if(!a)return null;let l=(e,a)=>{let l=Array.from(e.children).find(e=>e.nodeName===a);return l?l.textContent:""},i=(e,a)=>{let l=e.getElementsByTagName(a)[0];return l?l.textContent:""},s=(e,a)=>{let l=i(e,a);return l?parseInt(l,10):0},n={name:l(a,"name"),race:l(a,"race"),alignment:l(a,"alignment"),background:l(a,"background"),deity:l(a,"deity"),classes:[],abilities:{},ac:0,hp:0,speed:0,initiative:0,profBonus:0,skills:[],languages:[],feats:[]},t=a.getElementsByTagName("classes")[0];t&&Array.from(t.children).forEach(e=>{n.classes.push({name:i(e,"name"),level:s(e,"level")})});let r=a.getElementsByTagName("abilities")[0];r&&["strength","dexterity","constitution","intelligence","wisdom","charisma"].forEach(e=>{let a=r.getElementsByTagName(e)[0];a&&(n.abilities[e]={score:s(a,"score"),bonus:s(a,"bonus"),save:s(a,"save")})});let c=a.getElementsByTagName("defenses")[0];if(c){let e=c.getElementsByTagName("ac")[0];e&&(n.ac=s(e,"total"))}let d=a.getElementsByTagName("hp")[0];d&&(n.hp=s(d,"total"));let m=a.getElementsByTagName("speed")[0];m&&(n.speed=s(m,"total"));let o=a.getElementsByTagName("initiative")[0];o&&(n.initiative=s(o,"total")),n.profBonus=s(a,"profbonus");let h=a.getElementsByTagName("skilllist")[0];h&&Array.from(h.children).forEach(e=>{s(e,"prof")>0&&n.skills.push({name:i(e,"name"),total:s(e,"total")})});let p=a.getElementsByTagName("languagelist")[0];p&&Array.from(p.children).forEach(e=>{n.languages.push(i(e,"name"))});let x=a.getElementsByTagName("featlist")[0];return x&&Array.from(x.children).forEach(e=>{n.feats.push(i(e,"name"))}),n})(a);if(!l)throw Error(`Could not parse ${e}`);n(l)}).catch(e=>{console.error(e),h(e.message)})},[e]);let[g,v]=(0,t.useState)(null);if((0,t.useEffect)(()=>{if(j)if(l){let e=`${x}/${l}`;fetch(e,{method:"HEAD"}).then(a=>{a.ok&&(a.headers.get("content-type")||"").includes("image")?v(e):v(`${x}/faceless.svg`)}).catch(()=>v(`${x}/faceless.svg`))}else{let a=e.replace(".xml",""),l=`${x}/${a}.jpg`;fetch(l,{method:"HEAD"}).then(e=>{e.ok&&(e.headers.get("content-type")||"").includes("image")?v(l):v(`${x}/faceless.svg`)}).catch(()=>v(`${x}/faceless.svg`))}},[e,l,x,j]),c)return(0,s.jsxs)("div",{className:d.error,children:["Error: ",c]});if(!i)return(0,s.jsxs)("div",{className:d.loading,children:["Loading ",e,"..."]});let{name:y,race:b,alignment:N,background:_,deity:C,classes:T,abilities:D,ac:w,hp:E,speed:L,initiative:A,profBonus:S,skills:B,languages:M,feats:k}=i;return(0,s.jsxs)("div",{className:(0,o.A)(d.container,f&&d.containerMedium,u&&d.containerSmall,d[a]),children:[(()=>{if(!j)return null;let e=g?.includes("faceless.svg");return g?(0,s.jsx)("div",{className:d.portraitContainer,children:(0,s.jsx)("img",{src:g,alt:y,className:e?d.emptyFace:d.portrait})}):(0,s.jsx)("div",{className:d.portraitContainer,children:(0,s.jsx)("img",{src:`${x}/faceless.svg`,alt:y,className:d.emptyFace})})})(),(0,s.jsxs)("div",{className:d.content,children:[u?(0,s.jsx)("h3",{className:d.name,children:y}):f?(0,s.jsx)("h2",{className:d.name,children:y}):(0,s.jsx)("h1",{className:d.name,children:y}),(0,s.jsxs)("p",{className:(0,o.A)(d.classLevel,u&&d.small),children:[b&&(0,s.jsxs)("span",{children:[b," "]}),T.map(e=>`${e.name} ${e.level}`).join(" / "),N&&(0,s.jsxs)("span",{children:[", ",N.toLowerCase()]}),_&&!u&&(0,s.jsxs)("span",{children:[", ",_.toLowerCase()]}),C&&!u&&(0,s.jsxs)("span",{children:[", deity ",C]})]}),!u&&(0,s.jsx)("hr",{className:d.horizontalRule}),(0,s.jsxs)("ul",{className:(0,o.A)(d.vitals,u&&d.small),children:[(0,s.jsxs)("li",{className:d.vitalItem,children:[u?"AC":"Armor Class"," ",(0,s.jsx)("span",{children:w})]}),(0,s.jsxs)("li",{className:d.vitalItem,children:["Initiative ",(0,s.jsxs)("span",{children:[m(D?.dexterity?.bonus)," (",10+D?.dexterity?.bonus,")"]})]}),(0,s.jsxs)("li",{className:d.vitalItem,children:[u?"HP":"Hit Points"," ",(0,s.jsx)("span",{children:E})]}),(0,s.jsxs)("li",{className:d.vitalItem,children:["Speed ",(0,s.jsxs)("span",{children:[L," ft."]})]})]}),!u&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("hr",{className:d.horizontalRule}),(0,s.jsx)("div",{className:d.abilities,children:Object.entries(D).map(([e,a])=>(0,s.jsxs)("div",{className:d.ability,children:[(0,s.jsx)("div",{className:d.abilityLabel,children:e.slice(0,3).toUpperCase()}),(0,s.jsxs)("div",{className:d.abilityValue,children:[a.score," (",m(a.bonus),")"]})]},e))})]}),u&&(0,s.jsxs)("div",{className:d.abilitiesCompact,children:[(0,s.jsxs)("div",{className:d.abilitiesCompactHeader,children:[(0,s.jsx)("span",{}),(0,s.jsx)("span",{}),(0,s.jsx)("span",{children:"MOD"}),(0,s.jsx)("span",{children:"SAVE"}),(0,s.jsx)("span",{}),(0,s.jsx)("span",{}),(0,s.jsx)("span",{children:"MOD"}),(0,s.jsx)("span",{children:"SAVE"}),(0,s.jsx)("span",{}),(0,s.jsx)("span",{}),(0,s.jsx)("span",{children:"MOD"}),(0,s.jsx)("span",{children:"SAVE"})]}),Object.entries(D).map(([e,a])=>(0,s.jsxs)(t.Fragment,{children:[(0,s.jsx)("span",{className:d.abilityCompactLabel,children:e.slice(0,3).toUpperCase()}),(0,s.jsx)("span",{className:d.abilityCompactValue,children:a.score}),(0,s.jsx)("span",{className:d.abilityCompactBonus,children:m(a.bonus)}),(0,s.jsx)("span",{className:d.abilityCompactSave,children:m(a.save)})]},e))]}),!u&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("hr",{className:d.horizontalRule}),(0,s.jsxs)("div",{className:d.infoSection,children:[(0,s.jsx)("span",{className:d.infoLabel,children:"Saving Throws"}),(0,s.jsxs)("ul",{className:d.infoList,children:[Object.entries(D).filter(([,e])=>e.save!==e.bonus).map(([e,a])=>(0,s.jsxs)("li",{children:[e.slice(0,3).toUpperCase()," ",m(a.save)]},e)),Object.values(D).every(e=>e.save===e.bonus)&&(0,s.jsx)("li",{children:"None"},"none")]})]}),(0,s.jsxs)("div",{className:d.infoSection,children:[(0,s.jsx)("span",{className:d.infoLabel,children:"Proficient Skills"}),(0,s.jsx)("ul",{className:d.infoList,children:B.length>0?B.map(e=>(0,s.jsxs)("li",{children:[e.name," ",m(e.total)]},e.name)):(0,s.jsx)("li",{children:"None"})})]}),(0,s.jsxs)("div",{className:d.infoSection,children:[(0,s.jsx)("span",{className:d.infoLabel,children:"Languages"}),(0,s.jsx)("ul",{className:d.infoList,children:M.length>0?M.map(e=>(0,s.jsx)("li",{children:e},e)):(0,s.jsx)("li",{children:"Common"})})]}),(0,s.jsxs)("div",{className:d.infoSection,children:[(0,s.jsx)("span",{className:d.infoLabel,children:"Proficiency Bonus:"}),(0,s.jsx)("ul",{className:d.infoList,children:(0,s.jsx)("li",{children:m(S)})})]})]}),j&&k.length>0&&(0,s.jsxs)("div",{className:d.infoSection,children:[(0,s.jsx)("span",{className:d.infoLabel,children:"Feats:"}),(0,s.jsx)("ul",{className:d.infoList,children:k.map(e=>(0,s.jsx)("li",{children:e},e))})]})]}),(0,s.jsx)("div",{className:d.clearfix})]})}function x(e){let a={code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",p:"p",...(0,n.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(a.header,{children:(0,s.jsx)(a.h1,{id:"xmlchar-test-page",children:"XmlChar Test Page"})}),"\n",(0,s.jsxs)(a.p,{children:["This page tests the ",(0,s.jsx)(a.code,{children:"XmlChar"})," component with different display modes and character files."]}),"\n","\n",(0,s.jsx)(a.h2,{id:"display-small",children:"Display: Small"}),"\n",(0,s.jsx)(a.p,{children:"Shows a narrow card with vitality, level and abilities."}),"\n",(0,s.jsx)(a.h3,{id:"tanadiran---small",children:"Tanadiran - small"}),"\n",(0,s.jsx)(h,{filename:"tanadirian_6.xml",display:"small"}),"\n",(0,s.jsx)(a.h3,{id:"two-chars---small",children:"Two chars - small"}),"\n",(0,s.jsx)(h,{filename:"murky_5.xml",display:"small"}),"\n",(0,s.jsx)(h,{filename:"malfunction_dead.xml",display:"small"}),"\n",(0,s.jsx)(a.h3,{id:"three-chars---small",children:"Three chars - small"}),"\n",(0,s.jsx)(h,{filename:"delizan_3.xml",display:"small"}),"\n",(0,s.jsx)(h,{filename:"dorian_5.xml",display:"small"}),"\n",(0,s.jsx)(h,{filename:"dougal_death.xml",display:"small"}),"\n",(0,s.jsx)(a.h3,{id:"non-existant-character",children:"Non-existant character"}),"\n",(0,s.jsx)(h,{filename:"fail.xml",display:"small"}),"\n",(0,s.jsx)(a.h2,{id:"display-medium-default",children:"Display: Medium (Default)"}),"\n",(0,s.jsx)(a.p,{children:"Adds stats, skills, and languages."}),"\n",(0,s.jsx)(a.h3,{id:"tanadirian---medium",children:"Tanadirian - medium"}),"\n",(0,s.jsx)(h,{filename:"tanadirian_6.xml",display:"medium"}),"\n",(0,s.jsx)(a.h2,{id:"display-large",children:"Display: Large"}),"\n",(0,s.jsx)(a.p,{children:"Adds feats and character portrait placeholder (empty face)."}),"\n",(0,s.jsx)(a.h3,{id:"tanadirian-no-image",children:"Tanadirian no-image"}),"\n",(0,s.jsx)(h,{filename:"tanadirian_6.xml",image:"dontexists.jpg",display:"large"}),"\n",(0,s.jsx)(a.h2,{id:"display-large-with-image",children:"Display: Large with Image"}),"\n",(0,s.jsx)(a.p,{children:"Shows a provided character picture."}),"\n",(0,s.jsx)(a.h3,{id:"milo",children:"Milo"}),"\n",(0,s.jsx)(h,{filename:"milo_4n.xml",display:"large",image:"milo.jpg"}),"\n",(0,s.jsx)(a.h3,{id:"alioth",children:"Alioth"}),"\n",(0,s.jsx)(h,{filename:"alioth.xml",display:"large",image:"alioth.jpg"}),"\n",(0,s.jsx)(a.h3,{id:"antonidas",children:"Antonidas"}),"\n",(0,s.jsx)(h,{filename:"antonidas_5.xml",display:"large",image:"antonidas.png"}),"\n",(0,s.jsx)(a.h2,{id:"different-character",children:"Different Character"}),"\n",(0,s.jsx)(a.h3,{id:"malagolvir",children:"Malagolvir"}),"\n",(0,s.jsxs)(a.p,{children:["Testing with ",(0,s.jsx)(a.code,{children:"malagolvir_5.xml"})," medium."]}),"\n",(0,s.jsx)(h,{filename:"malagolvir_5.xml",display:"medium"}),"\n",(0,s.jsxs)(a.p,{children:["Testing with ",(0,s.jsx)(a.code,{children:"malagolvir_5"})," small."]}),"\n",(0,s.jsx)(h,{filename:"malagolvir_5",display:"small"})]})}function u(e={}){let{wrapper:a}={...(0,n.R)(),...e.components};return a?(0,s.jsx)(a,{...e,children:(0,s.jsx)(x,{...e})}):x(e)}let f={hide_title:!0},j,g={},v=[{value:"Display: Small",id:"display-small",level:2},{value:"Tanadiran - small",id:"tanadiran---small",level:3},{value:"Two chars - small",id:"two-chars---small",level:3},{value:"Three chars - small",id:"three-chars---small",level:3},{value:"Non-existant character",id:"non-existant-character",level:3},{value:"Display: Medium (Default)",id:"display-medium-default",level:2},{value:"Tanadirian - medium",id:"tanadirian---medium",level:3},{value:"Display: Large",id:"display-large",level:2},{value:"Tanadirian no-image",id:"tanadirian-no-image",level:3},{value:"Display: Large with Image",id:"display-large-with-image",level:2},{value:"Milo",id:"milo",level:3},{value:"Alioth",id:"alioth",level:3},{value:"Antonidas",id:"antonidas",level:3},{value:"Different Character",id:"different-character",level:2},{value:"Malagolvir",id:"malagolvir",level:3}];function y(e){return(0,s.jsx)(u,{})}function b(e={}){let{wrapper:a}={...(0,n.R)(),...e.components};return a?(0,s.jsx)(a,{...e,children:(0,s.jsx)(y,{...e})}):y(e)}},10307:function(e,a,l){l.d(a,{A:()=>n});var i=l(74848);l(96540);var s=l(98864);function n({children:e,fallback:a}){return(0,s.A)()?(0,i.jsx)(i.Fragment,{children:e?.()}):a??null}},84429:function(e,a,l){l.d(a,{R:()=>t,x:()=>r});var i=l(96540);let s={},n=i.createContext(s);function t(e){let a=i.useContext(n);return i.useMemo(function(){return"function"==typeof e?e(a):{...a,...e}},[a,e])}function r(e){let a;return a=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:t(e.components),i.createElement(n.Provider,{value:a},e.children)}}}]);