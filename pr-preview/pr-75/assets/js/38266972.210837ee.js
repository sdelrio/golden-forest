"use strict";(self.webpackChunkgolden_forest_website=self.webpackChunkgolden_forest_website||[]).push([["7195"],{41223:function(e,s,n){n.r(s),n.d(s,{frontMatter:()=>t,toc:()=>a,default:()=>u,metadata:()=>r,assets:()=>o,contentTitle:()=>i});var r=JSON.parse('{"id":"OS-and-Hardware/OS/GNU-Linux/resolved","title":"Systemd-resolved","description":"Disable systemd-resolved","source":"@site/docs/OS-and-Hardware/OS/GNU-Linux/resolved.md","sourceDirName":"OS-and-Hardware/OS/GNU-Linux","slug":"/OS-and-Hardware/OS/GNU-Linux/resolved","permalink":"/pr-preview/pr-75/docs/OS-and-Hardware/OS/GNU-Linux/resolved","draft":false,"unlisted":false,"editUrl":"https://github.com/sdelrio/golden-forest/edit/master/docs/OS-and-Hardware/OS/GNU-Linux/resolved.md","tags":[],"version":"current","frontMatter":{},"sidebar":"tutorialSidebar","previous":{"title":"Netplan","permalink":"/pr-preview/pr-75/docs/OS-and-Hardware/OS/GNU-Linux/netplan"},"next":{"title":"ssh client","permalink":"/pr-preview/pr-75/docs/OS-and-Hardware/OS/GNU-Linux/ssh"}}'),d=n(74848),l=n(84429);let t={},i="Systemd-resolved",o={},a=[{value:"Disable systemd-resolved",id:"disable-systemd-resolved",level:2},{value:"Ubuntu",id:"ubuntu",level:3},{value:"Use resolvconf",id:"use-resolvconf",level:3}];function c(e){let s={a:"a",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",ol:"ol",p:"p",pre:"pre",ul:"ul",...(0,l.R)(),...e.components};return(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)(s.header,{children:(0,d.jsx)(s.h1,{id:"systemd-resolved",children:"Systemd-resolved"})}),"\n",(0,d.jsx)(s.h2,{id:"disable-systemd-resolved",children:"Disable systemd-resolved"}),"\n",(0,d.jsx)(s.h3,{id:"ubuntu",children:"Ubuntu"}),"\n",(0,d.jsxs)(s.ol,{children:["\n",(0,d.jsx)(s.li,{children:"Disable and stop sytemd-resolved servicee"}),"\n"]}),"\n",(0,d.jsx)(s.pre,{children:(0,d.jsx)(s.code,{className:"language-bash",children:"sudo systemctl disable systemd-resolved\nsudo systemctl stop systemd-resolved\n"})}),"\n",(0,d.jsxs)(s.ol,{start:"2",children:["\n",(0,d.jsxs)(s.li,{children:["Put ",(0,d.jsx)(s.code,{children:"dns=default"})," on ",(0,d.jsx)(s.code,{children:"[main]"})," section of your ",(0,d.jsx)(s.code,{children:"/etc/NetworkManager/NetworkManager.conf"}),":"]}),"\n"]}),"\n",(0,d.jsx)(s.pre,{children:(0,d.jsx)(s.code,{className:"language-bash",children:"dns=default\n"})}),"\n",(0,d.jsxs)(s.ol,{start:"3",children:["\n",(0,d.jsxs)(s.li,{children:["\n",(0,d.jsxs)(s.p,{children:["Delete symlink ",(0,d.jsx)(s.code,{children:"/etc/resolv.conf"})]}),"\n"]}),"\n",(0,d.jsxs)(s.li,{children:["\n",(0,d.jsx)(s.p,{children:"Restart NetworkManager"}),"\n"]}),"\n"]}),"\n",(0,d.jsx)(s.pre,{children:(0,d.jsx)(s.code,{className:"language-bash",children:"sudo systemctl restart NetworkManager\n"})}),"\n",(0,d.jsxs)(s.ul,{children:["\n",(0,d.jsx)(s.li,{children:(0,d.jsx)(s.a,{href:"https://askubuntu.com/questions/907246/how-to-disable-systemd-resolved-in-ubuntu",children:"https://askubuntu.com/questions/907246/how-to-disable-systemd-resolved-in-ubuntu"})}),"\n"]}),"\n",(0,d.jsx)(s.h3,{id:"use-resolvconf",children:"Use resolvconf"}),"\n",(0,d.jsx)(s.p,{children:"To replace systemd and manual set the DNS server"}),"\n",(0,d.jsxs)(s.ol,{children:["\n",(0,d.jsxs)(s.li,{children:["Install ",(0,d.jsx)(s.code,{children:"resolvconf"}),":"]}),"\n"]}),"\n",(0,d.jsx)(s.pre,{children:(0,d.jsx)(s.code,{children:"sudo apt install resolvconf\n"})}),"\n",(0,d.jsxs)(s.ol,{start:"2",children:["\n",(0,d.jsxs)(s.li,{children:["Edit ",(0,d.jsx)(s.code,{children:"tail"})," file"]}),"\n"]}),"\n",(0,d.jsx)(s.pre,{children:(0,d.jsx)(s.code,{children:"vi /etc/resolvconf/resolv.conf.d/tail\n"})}),"\n",(0,d.jsx)(s.p,{children:"Set the DNS server we want to use in that file:"}),"\n",(0,d.jsx)(s.pre,{children:(0,d.jsx)(s.code,{children:"nameserver 8.8.8.8\n"})}),"\n",(0,d.jsx)(s.p,{children:"Make sure systemd-resolved is disabled"}),"\n",(0,d.jsx)(s.pre,{children:(0,d.jsx)(s.code,{children:"sudo systemctl disable systemd-resolved\n"})})]})}function u(e={}){let{wrapper:s}={...(0,l.R)(),...e.components};return s?(0,d.jsx)(s,{...e,children:(0,d.jsx)(c,{...e})}):c(e)}},84429:function(e,s,n){n.d(s,{R:()=>t,x:()=>i});var r=n(96540);let d={},l=r.createContext(d);function t(e){let s=r.useContext(l);return r.useMemo(function(){return"function"==typeof e?e(s):{...s,...e}},[s,e])}function i(e){let s;return s=e.disableParentContext?"function"==typeof e.components?e.components(d):e.components||d:t(e.components),r.createElement(l.Provider,{value:s},e.children)}}}]);