"use strict";(self.webpackChunkgolden_forest_website=self.webpackChunkgolden_forest_website||[]).push([[7585],{28453:(e,s,n)=>{n.d(s,{R:()=>d,x:()=>o});var r=n(96540);const l={},t=r.createContext(l);function d(e){const s=r.useContext(t);return r.useMemo((function(){return"function"==typeof e?e(s):{...s,...e}}),[s,e])}function o(e){let s;return s=e.disableParentContext?"function"==typeof e.components?e.components(l):e.components||l:d(e.components),r.createElement(t.Provider,{value:s},e.children)}},33771:(e,s,n)=>{n.r(s),n.d(s,{assets:()=>i,contentTitle:()=>o,default:()=>u,frontMatter:()=>d,metadata:()=>r,toc:()=>c});const r=JSON.parse('{"id":"OS/GNU-Linux/resolved","title":"Systemd-resolved","description":"Disable systemd-resolved","source":"@site/docs/OS/GNU-Linux/resolved.md","sourceDirName":"OS/GNU-Linux","slug":"/OS/GNU-Linux/resolved","permalink":"/pr-preview/pr-32/docs/OS/GNU-Linux/resolved","draft":false,"unlisted":false,"editUrl":"https://github.com/sdelrio/golden-forest/edit/master/docs/OS/GNU-Linux/resolved.md","tags":[],"version":"current","frontMatter":{},"sidebar":"tutorialSidebar","previous":{"title":"Netplan","permalink":"/pr-preview/pr-32/docs/OS/GNU-Linux/netplan"},"next":{"title":"ssh client","permalink":"/pr-preview/pr-32/docs/OS/GNU-Linux/ssh"}}');var l=n(74848),t=n(28453);const d={},o="Systemd-resolved",i={},c=[{value:"Disable systemd-resolved",id:"disable-systemd-resolved",level:2},{value:"Ubuntu",id:"ubuntu",level:3},{value:"Use resolvconf",id:"use-resolvconf",level:3}];function a(e){const s={a:"a",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",ol:"ol",p:"p",pre:"pre",ul:"ul",...(0,t.R)(),...e.components};return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(s.header,{children:(0,l.jsx)(s.h1,{id:"systemd-resolved",children:"Systemd-resolved"})}),"\n",(0,l.jsx)(s.h2,{id:"disable-systemd-resolved",children:"Disable systemd-resolved"}),"\n",(0,l.jsx)(s.h3,{id:"ubuntu",children:"Ubuntu"}),"\n",(0,l.jsxs)(s.ol,{children:["\n",(0,l.jsx)(s.li,{children:"Disable and stop sytemd-resolved servicee"}),"\n"]}),"\n",(0,l.jsx)(s.pre,{children:(0,l.jsx)(s.code,{className:"language-bash",children:"sudo systemctl disable systemd-resolved\nsudo systemctl stop systemd-resolved\n"})}),"\n",(0,l.jsxs)(s.ol,{start:"2",children:["\n",(0,l.jsxs)(s.li,{children:["Put ",(0,l.jsx)(s.code,{children:"dns=default"})," on ",(0,l.jsx)(s.code,{children:"[main]"})," section of your ",(0,l.jsx)(s.code,{children:"/etc/NetworkManager/NetworkManager.conf"}),":"]}),"\n"]}),"\n",(0,l.jsx)(s.pre,{children:(0,l.jsx)(s.code,{className:"language-bash",children:"dns=default\n"})}),"\n",(0,l.jsxs)(s.ol,{start:"3",children:["\n",(0,l.jsxs)(s.li,{children:["\n",(0,l.jsxs)(s.p,{children:["Delete symlink ",(0,l.jsx)(s.code,{children:"/etc/resolv.conf"})]}),"\n"]}),"\n",(0,l.jsxs)(s.li,{children:["\n",(0,l.jsx)(s.p,{children:"Restart NetworkManager"}),"\n"]}),"\n"]}),"\n",(0,l.jsx)(s.pre,{children:(0,l.jsx)(s.code,{className:"language-bash",children:"sudo systemctl restart NetworkManager\n"})}),"\n",(0,l.jsxs)(s.ul,{children:["\n",(0,l.jsx)(s.li,{children:(0,l.jsx)(s.a,{href:"https://askubuntu.com/questions/907246/how-to-disable-systemd-resolved-in-ubuntu",children:"https://askubuntu.com/questions/907246/how-to-disable-systemd-resolved-in-ubuntu"})}),"\n"]}),"\n",(0,l.jsx)(s.h3,{id:"use-resolvconf",children:"Use resolvconf"}),"\n",(0,l.jsx)(s.p,{children:"To replace systemd and manual set the DNS server"}),"\n",(0,l.jsxs)(s.ol,{children:["\n",(0,l.jsxs)(s.li,{children:["Install ",(0,l.jsx)(s.code,{children:"resolvconf"}),":"]}),"\n"]}),"\n",(0,l.jsx)(s.pre,{children:(0,l.jsx)(s.code,{children:"sudo apt install resolvconf\n"})}),"\n",(0,l.jsxs)(s.ol,{start:"2",children:["\n",(0,l.jsxs)(s.li,{children:["Edit ",(0,l.jsx)(s.code,{children:"tail"})," file"]}),"\n"]}),"\n",(0,l.jsx)(s.pre,{children:(0,l.jsx)(s.code,{children:"vi /etc/resolvconf/resolv.conf.d/tail\n"})}),"\n",(0,l.jsx)(s.p,{children:"Set the DNS server we want to use in that file:"}),"\n",(0,l.jsx)(s.pre,{children:(0,l.jsx)(s.code,{children:"nameserver 8.8.8.8\n"})}),"\n",(0,l.jsx)(s.p,{children:"Make sure systemd-resolved is disabled"}),"\n",(0,l.jsx)(s.pre,{children:(0,l.jsx)(s.code,{children:"sudo systemctl disable systemd-resolved\n"})})]})}function u(e={}){const{wrapper:s}={...(0,t.R)(),...e.components};return s?(0,l.jsx)(s,{...e,children:(0,l.jsx)(a,{...e})}):a(e)}}}]);