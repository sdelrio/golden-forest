"use strict";(self.webpackChunkgolden_forest_website=self.webpackChunkgolden_forest_website||[]).push([["5084"],{43885:function(e,n,t){t.r(n),t.d(n,{default:()=>d,frontMatter:()=>i,metadata:()=>r,assets:()=>c,toc:()=>l,contentTitle:()=>o});var r=JSON.parse('{"id":"DevOps/CI/Platforms/Jenkins/Jenkinsfile-react","title":"Jenkinsfile React app","description":"* Continuous delivery of react app with Jenkins and Docker","source":"@site/docs/DevOps/CI/Platforms/Jenkins/Jenkinsfile-react.md","sourceDirName":"DevOps/CI/Platforms/Jenkins","slug":"/DevOps/CI/Platforms/Jenkins/Jenkinsfile-react","permalink":"/pr-preview/pr-41/docs/DevOps/CI/Platforms/Jenkins/Jenkinsfile-react","draft":false,"unlisted":false,"editUrl":"https://github.com/sdelrio/golden-forest/edit/master/docs/DevOps/CI/Platforms/Jenkins/Jenkinsfile-react.md","tags":[],"version":"current","frontMatter":{},"sidebar":"tutorialSidebar","previous":{"title":"Jenkinsfile node app","permalink":"/pr-preview/pr-41/docs/DevOps/CI/Platforms/Jenkins/Jenkinsfile-node"},"next":{"title":"Jenkins Chaos engineering","permalink":"/pr-preview/pr-41/docs/DevOps/CI/Platforms/Jenkins/jenkins-chaos-engineering"}}'),s=t("85893"),a=t("50065");let i={},o="Jenkinsfile React app",c={},l=[{value:"Jenkinsfile",id:"jenkinsfile",level:2},{value:"Dockerfile",id:"dockerfile",level:2},{value:"Dockerfile.test",id:"dockerfiletest",level:2}];function p(e){let n={a:"a",code:"code",h1:"h1",h2:"h2",header:"header",li:"li",pre:"pre",ul:"ul",...(0,a.a)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(n.header,{children:(0,s.jsx)(n.h1,{id:"jenkinsfile-react-app",children:"Jenkinsfile React app"})}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.a,{href:"https://hackernoon.com/continuous-delivery-of-react-app-with-jenkins-and-docker-8a1ae1511b86",children:"Continuous delivery of react app with Jenkins and Docker"})}),"\n"]}),"\n",(0,s.jsx)(n.h2,{id:"jenkinsfile",children:"Jenkinsfile"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-groovy",children:"node {\n  try {\n    stage('Checkout') {\n      checkout scm\n    }\n    stage('Environment') {\n      sh 'git --version'\n      echo \"Branch: ${env.BRANCH_NAME}\"\n      sh 'docker -v'\n      sh 'printenv'\n    }\n    stage('Build Docker test'){\n     sh 'docker build -t react-test -f Dockerfile.test --no-cache .'\n    }\n    stage('Docker test'){\n      sh 'docker run --rm react-test'\n    }\n    stage('Clean Docker test'){\n      sh 'docker rmi react-test'\n    }\n    stage('Deploy'){\n      if(env.BRANCH_NAME == 'master'){\n        sh 'docker build -t react-app --no-cache .'\n        sh 'docker tag react-app localhost:5000/react-app'\n        sh 'docker push localhost:5000/react-app'\n        sh 'docker rmi -f react-app localhost:5000/react-app'\n      }\n    }\n  }\n  catch (err) {\n    throw err\n  }\n}\n"})}),"\n",(0,s.jsx)(n.h2,{id:"dockerfile",children:"Dockerfile"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-docker",children:'# Extending image\nFROM node:carbon\n\nRUN apt-get update\nRUN apt-get upgrade -y\nRUN apt-get -y install autoconf automake libtool nasm make pkg-config git apt-utils\n\n# Create app directory\nRUN mkdir -p /usr/src/app\nWORKDIR /usr/src/app\n\n# Versions\nRUN npm -v\nRUN node -v\n\n# Install app dependencies\nCOPY package.json /usr/src/app/\nCOPY package-lock.json /usr/src/app/\n\nRUN npm install\n\n# Bundle app source\nCOPY . /usr/src/app\n\n# Port to listener\nEXPOSE 3000\n\n# Environment variables\nENV NODE_ENV production\nENV PORT 3000\nENV PUBLIC_PATH "/"\n\nRUN npm run start:build\n\n# Main command\nCMD [ "npm", "run", "start:server" ]\n'})}),"\n",(0,s.jsx)(n.h2,{id:"dockerfiletest",children:"Dockerfile.test"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-dockerfile",children:'# Extending image\nFROM node:carbon\n\nRUN apt-get update\nRUN apt-get upgrade -y\nRUN apt-get -y install autoconf automake libtool nasm make pkg-config git apt-utils\n\n# Create app directory\nRUN mkdir -p /usr/src/app\nWORKDIR /usr/src/app\n\n# Versions\nRUN npm -v\nRUN node -v\n\n# Install app dependencies\nCOPY package.json /usr/src/app/\nCOPY package-lock.json /usr/src/app/\n\nRUN npm install\n\n# Bundle app source\nCOPY . /usr/src/app\n\n# Environment variables\nENV NODE_ENV test\n\n# Main command\nCMD [ "npm", "test" ]\n'})})]})}function d(e={}){let{wrapper:n}={...(0,a.a)(),...e.components};return n?(0,s.jsx)(n,{...e,children:(0,s.jsx)(p,{...e})}):p(e)}},50065:function(e,n,t){t.d(n,{Z:function(){return o},a:function(){return i}});var r=t(67294);let s={},a=r.createContext(s);function i(e){let n=r.useContext(a);return r.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function o(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:i(e.components),r.createElement(a.Provider,{value:n},e.children)}}}]);