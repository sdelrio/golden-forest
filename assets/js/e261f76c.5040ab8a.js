"use strict";(self.webpackChunkgolden_forest_website=self.webpackChunkgolden_forest_website||[]).push([[6367],{1236:(e,t,s)=>{s.r(t),s.d(t,{assets:()=>d,contentTitle:()=>o,default:()=>p,frontMatter:()=>a,metadata:()=>r,toc:()=>i});var l=s(7462),n=(s(7294),s(3905));s(1839);const a={},o="Systemd-resolved",r={unversionedId:"OS/GNU-Linux/resolved",id:"OS/GNU-Linux/resolved",title:"Systemd-resolved",description:"Disable systemd-resolved",source:"@site/docs/OS/GNU-Linux/resolved.md",sourceDirName:"OS/GNU-Linux",slug:"/OS/GNU-Linux/resolved",permalink:"/docs/OS/GNU-Linux/resolved",draft:!1,editUrl:"https://github.com/sdelrio/golden-forest/edit/master/docs/OS/GNU-Linux/resolved.md",tags:[],version:"current",frontMatter:{},sidebar:"tutorialSidebar",previous:{title:"Netplan",permalink:"/docs/OS/GNU-Linux/netplan"},next:{title:"ssh client",permalink:"/docs/OS/GNU-Linux/ssh"}},d={},i=[{value:"Disable systemd-resolved",id:"disable-systemd-resolved",level:2},{value:"Ubuntu",id:"ubuntu",level:3},{value:"Use resolvconf",id:"use-resolvconf",level:3}],u={toc:i},m="wrapper";function p(e){let{components:t,...s}=e;return(0,n.kt)(m,(0,l.Z)({},u,s,{components:t,mdxType:"MDXLayout"}),(0,n.kt)("h1",{id:"systemd-resolved"},"Systemd-resolved"),(0,n.kt)("h2",{id:"disable-systemd-resolved"},"Disable systemd-resolved"),(0,n.kt)("h3",{id:"ubuntu"},"Ubuntu"),(0,n.kt)("ol",null,(0,n.kt)("li",{parentName:"ol"},"Disable and stop sytemd-resolved servicee")),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-bash"},"sudo systemctl disable systemd-resolved\nsudo systemctl stop systemd-resolved\n")),(0,n.kt)("ol",{start:2},(0,n.kt)("li",{parentName:"ol"},"Put ",(0,n.kt)("inlineCode",{parentName:"li"},"dns=default")," on ",(0,n.kt)("inlineCode",{parentName:"li"},"[main]")," section of your ",(0,n.kt)("inlineCode",{parentName:"li"},"/etc/NetworkManager/NetworkManager.conf"),":")),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-bash"},"dns=default\n")),(0,n.kt)("ol",{start:3},(0,n.kt)("li",{parentName:"ol"},"Delete symlink ",(0,n.kt)("inlineCode",{parentName:"li"},"/etc/resolv.conf"))),(0,n.kt)("ol",{start:4},(0,n.kt)("li",{parentName:"ol"},"Restart NetworkManager")),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-bash"},"sudo systemctl restart NetworkManager\n")),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("a",{parentName:"li",href:"https://askubuntu.com/questions/907246/how-to-disable-systemd-resolved-in-ubuntu"},"https://askubuntu.com/questions/907246/how-to-disable-systemd-resolved-in-ubuntu"))),(0,n.kt)("h3",{id:"use-resolvconf"},"Use resolvconf"),(0,n.kt)("p",null,"To replace systemd and manual set the DNS server"),(0,n.kt)("ol",null,(0,n.kt)("li",{parentName:"ol"},"Install ",(0,n.kt)("inlineCode",{parentName:"li"},"resolvconf"),":")),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre"},"sudo apt install resolvconf\n")),(0,n.kt)("ol",{start:2},(0,n.kt)("li",{parentName:"ol"},"Edit ",(0,n.kt)("inlineCode",{parentName:"li"},"tail")," file")),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre"},"vi /etc/resolvconf/resolv.conf.d/tail\n")),(0,n.kt)("p",null,"Set the DNS server we want to use in that file:"),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre"},"nameserver 8.8.8.8\n")),(0,n.kt)("p",null,"Make sure systemd-resolved is disabled"),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre"},"sudo systemctl disable systemd-resolved\n")))}p.isMDXComponent=!0}}]);