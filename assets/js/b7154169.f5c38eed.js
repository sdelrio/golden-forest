"use strict";(self.webpackChunkgolden_forest_website=self.webpackChunkgolden_forest_website||[]).push([["2069"],{50961:function(e,n,s){s.r(n),s.d(n,{default:()=>u,frontMatter:()=>a,metadata:()=>t,assets:()=>o,toc:()=>c,contentTitle:()=>l});var t=JSON.parse('{"id":"Cloud-Platform/Kubernetes/k8s-tools","title":"K8s tools","description":"k9s","source":"@site/docs/Cloud-Platform/Kubernetes/k8s-tools.md","sourceDirName":"Cloud-Platform/Kubernetes","slug":"/Cloud-Platform/Kubernetes/k8s-tools","permalink":"/golden-forest/docs/Cloud-Platform/Kubernetes/k8s-tools","draft":false,"unlisted":false,"editUrl":"https://github.com/sdelrio/golden-forest/edit/master/docs/Cloud-Platform/Kubernetes/k8s-tools.md","tags":[],"version":"current","frontMatter":{},"sidebar":"tutorialSidebar","previous":{"title":"K8s streaming","permalink":"/golden-forest/docs/Cloud-Platform/Kubernetes/k8s-streaming"},"next":{"title":"Tunnels","permalink":"/golden-forest/docs/Cloud-Platform/Kubernetes/k8s-tunnels"}}'),r=s("85893"),i=s("50065");let a={},l="K8s tools",o={},c=[{value:"k9s",id:"k9s",level:2},{value:"Telepresence",id:"telepresence",level:2},{value:"K8s yaml validation",id:"k8s-yaml-validation",level:2},{value:"kubeval",id:"kubeval",level:3},{value:"datree.io",id:"datreeio",level:3},{value:"kube-score",id:"kube-score",level:3},{value:"Kustomize",id:"kustomize",level:3},{value:"YAMLs",id:"yamls",level:4},{value:"Example with an existing cluster",id:"example-with-an-existing-cluster",level:4}];function d(e){let n={a:"a",code:"code",h1:"h1",h2:"h2",h3:"h3",h4:"h4",header:"header",li:"li",p:"p",pre:"pre",ul:"ul",...(0,i.a)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(n.header,{children:(0,r.jsx)(n.h1,{id:"k8s-tools",children:"K8s tools"})}),"\n",(0,r.jsx)(n.h2,{id:"k9s",children:"k9s"}),"\n",(0,r.jsx)(n.p,{children:"K9s is a terminal based UI to interact with your Kubernetes clusters. Easy to navigate, observe and manage your deployed applications in the wild. K9s continually watches Kubernetes for changes and offers subsequent commands to interact with your observed resources. It uses common keys used in the editor vim."}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.a,{href:"https://k9scli.io/",children:"k9s homepage"})}),"\n"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{children:" Context: mycluser.local                           <c>      Cordon     <u> Uncordon        ____  __.________        \n Cluster: mycluster.local                          <ctrl-d> Delete     <y> YAML           |    |/ _/   __   \\______ \n User:    kube-admin-mycluster.local               <d>      Describe                      |      < \\____    /  ___/ \n K9s Rev: v0.25.18                                 <r>      Drain                         |    |  \\   /    /\\___ \\  \n K8s Rev: v1.20.14                                 <e>      Edit                          |____|__ \\ /____//____  > \n CPU:     26%                                      <?>      Help                                  \\/            \\/  \n MEM:     44%                                                                                                       \n\u250C\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500 Nodes(all)[3] \u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502 NAME\u2191   STATUS  ROLE                       VERSION     PODS   CPU   MEM   %CPU   %MEM   CPU/A   MEM/A AGE        \u2502\n\u2502 node0   Ready   etcd,worker                v1.20.14      45   656  4198     16     53    4000    7818 2y153d     \u2502\n\u2502 node1   Ready   controlplane,etcd,worker   v1.20.14      30  1066  3710     26     37    4000    9770 2y351d     \u2502\n\u2502 node2   Ready   controlplane,etcd,worker   v1.20.14      38  1482  4384     37     44    4000    9838 2y351d     \u2502\n\u2502                                                                                                                  \u2502\n\u2502                                                                                                                  \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n<node>\n"})}),"\n",(0,r.jsx)(n.h2,{id:"telepresence",children:"Telepresence"}),"\n",(0,r.jsx)(n.p,{children:"Telepresence is an open source tool that lets you run a single service locally, while connecting that service to a remote Kubernetes cluster."}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.a,{href:"https://www.telepresence.io/",children:"Telepresence Homepage"})}),"\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.a,{href:"https://www.telepresence.io/docs/latest/quick-start/",children:"Telepresence docs"})}),"\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.a,{href:"https://thenewstack.io/evolving-cncfs-telepresence-adopting-a-tun-device-to-deliver-stability-and-portability/",children:"2022 Evolving CNCF\u2019s Telepresence: Adopting a TUN Device to Deliver Stability and Portability"})}),"\n"]}),"\n",(0,r.jsx)(n.h2,{id:"k8s-yaml-validation",children:"K8s yaml validation"}),"\n",(0,r.jsx)(n.h3,{id:"kubeval",children:(0,r.jsx)(n.a,{href:"https://www.kubeval.com/",children:"kubeval"})}),"\n",(0,r.jsx)(n.p,{children:"Validate one or more Kubernetes configuration files, and is often used locally as part of a development workflow as well as in CI pipelines."}),"\n",(0,r.jsx)(n.p,{children:"At the most basic level, Kubeval is used like so:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"$ kubeval my-invalid-rc.yaml\nWARN - my-invalid-rc.yaml contains an invalid ReplicationController - spec.replicas: Invalid type. Expected: integer, given: string\n$ echo $?\n1\n"})}),"\n",(0,r.jsx)(n.h3,{id:"datreeio",children:(0,r.jsx)(n.a,{href:"https://hub.datree.io/",children:"datree.io"})}),"\n",(0,r.jsx)(n.p,{children:"Datree prevents Kubernetes misconfigurations from reaching production."}),"\n",(0,r.jsx)(n.p,{children:"As your organization's infrastructure owner, the product\u2019s stability is your primary concern. Toolchain engineering and architecture gets pushed to the wayside because you must constantly put out fires configured in the development stage."}),"\n",(0,r.jsx)(n.p,{children:"It has a free Community and a paid Enterprise version."}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:'$ datree test ./k8s-demo.yaml\n>>  File: k8s-demo.yaml\n\n[V] YAML validation\n[V] Kubernetes schema validation\n\n[X] Policy check\n\n\u274C  Ensure each container image has a pinned (tag) version  [1 occurrence]\n    \u2014 metadata.name: rss-site (kind: Deployment)\n\uD83D\uDCA1  Incorrect value for key `image` - specify an image version to avoid unpleasant "version surprises" in the future\n\n\u274C  Ensure each container has a configured memory limit  [1 occurrence]\n    \u2014 metadata.name: rss-site (kind: Deployment)\n\uD83D\uDCA1  Missing property object `limits.memory` - value should be within the accepted boundaries recommended by the organization\n\n\u274C  Ensure workload has valid label values  [1 occurrence]\n    \u2014 metadata.name: rss-site (kind: Deployment)\n\uD83D\uDCA1  Incorrect value for key(s) under `labels` - the vales syntax is not valid so the Kubernetes engine will not accept it\n\n\u274C  Ensure each container has a configured liveness probe  [1 occurrence]\n    \u2014 metadata.name: rss-site (kind: Deployment)\n\uD83D\uDCA1  Missing property object `livenessProbe` - add a properly configured livenessProbe to catch possible deadlocks\n\n\n(Summary)\n\n- Passing YAML validation: 1/1\n\n- Passing Kubernetes (1.19.0) schema validation: 1/1\n\n- Passing policy check: 0/1\n\n+-----------------------------------+----------------------------------------------------------+\n| Enabled rules in policy \u201CDefault\u201D | 21                                                       |\n| Configs tested against policy     | 1                                                        |\n| Total rules evaluated             | 21                                                       |\n| Total rules failed                | 4                                                        |\n| Total rules passed                | 17                                                       |\n| See all rules in policy           | https://app.datree.io/login?cliId=C2JWeCNE5G7cybebjhszFR |\n+-----------------------------------+----------------------------------------------------------+\n'})}),"\n",(0,r.jsx)(n.h3,{id:"kube-score",children:(0,r.jsx)(n.a,{href:"https://kube-score.com/",children:"kube-score"})}),"\n",(0,r.jsx)(n.p,{children:"Kubernetes object analysis with recommendations for improved reliability and security."}),"\n",(0,r.jsx)(n.p,{children:"kube-score is a tool that does static code analysis of your Kubernetes object definitions. The output is a list of recommendations of what you can improve to make your application more secure and resilient."}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.code,{children:"kube-score"})," can run in your CI/CD environment and will exit with exit code 1 if a critical error has been found. The trigger level can be changed to warning with the ",(0,r.jsx)(n.code,{children:"--exit-one-on-warning argument"}),"."]}),"\n",(0,r.jsx)(n.p,{children:"The input to kube-score should be all applications that you deploy to the same namespace for the best result.\nExample with Helm"}),"\n",(0,r.jsx)(n.p,{children:"helm template my-app | kube-score score -"}),"\n",(0,r.jsx)(n.h3,{id:"kustomize",children:"Kustomize"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"kustomize build . | kube-score score -\n"})}),"\n",(0,r.jsx)(n.h4,{id:"yamls",children:"YAMLs"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"kube-score score my-app/*.yaml\n\nkube-score score my-app/deployment.yaml my-app/service.yaml\n"})}),"\n",(0,r.jsx)(n.h4,{id:"example-with-an-existing-cluster",children:"Example with an existing cluster"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:'kubectl api-resources --verbs=list --namespaced -o name \\\n  | xargs -n1 -I{} bash -c "kubectl get {} --all-namespaces -oyaml && echo ---" \\\n  | kube-score score -\n'})})]})}function u(e={}){let{wrapper:n}={...(0,i.a)(),...e.components};return n?(0,r.jsx)(n,{...e,children:(0,r.jsx)(d,{...e})}):d(e)}},50065:function(e,n,s){s.d(n,{Z:function(){return l},a:function(){return a}});var t=s(67294);let r={},i=t.createContext(r);function a(e){let n=t.useContext(i);return t.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function l(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:a(e.components),t.createElement(i.Provider,{value:n},e.children)}}}]);